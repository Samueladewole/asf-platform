<?xml version="1.0" encoding="UTF-8"?>
<!--
    ASF PoC.
    Maven local settings.xml for Jenkins.
    
    Copyright (c) 2014 Grid Dynamics International, Inc.
-->
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0" 
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
 
<% if @use_jbehave_proxy == 'true' %>
<%= render 'jenkins/jbehave_mirrors_settings.xml.erb' %>
<% end %>

    <profiles>
 
        <!--
            CI build profiles - separate for each development stream
            - feature branches, mainline and release branches.
        -->
 
        <!-- Deployment configuration for CI builds for mainline -->
        <profile>
            <id>build</id>
 
            <properties>
                <!-- For deploy:deploy-file and <distributionManagement> -->
                <repositoryId/>
                <repositoryUrl/>
                <snapshotsRepositoryId>asf-nexus</snapshotsRepositoryId>
                <snapshotsUrl>${env.NEXUS_URL}/content/repositories/builds-main</snapshotsUrl>
            </properties>
            <repositories>
                <repository>
                    <id>builds-all</id>
                    <url>${env.NEXUS_URL}/content/repositories/builds-all/</url>
                    <updatePolicy>always</updatePolicy>
                </repository>
            </repositories>
        </profile>
 
        <!-- Deployment configuration for CI builds from feature branches -->
        <profile>
            <id>build-fb</id>
 
            <properties>
                <!-- For deploy:deploy-file and <distributionManagement> -->
                <repositoryId/>
                <repositoryUrl/>
                <snapshotsRepositoryId>asf-nexus</snapshotsRepositoryId>
                <snapshotsUrl>${env.NEXUS_URL}/content/repositories/builds-feature</snapshotsUrl>
            </properties>
            <repositories>
                <repository>
                    <id>builds-all</id>
                    <url>${env.NEXUS_URL}/content/repositories/builds-all/</url>
                    <updatePolicy>always</updatePolicy>
                </repository>
            </repositories>
        </profile>
 
<% if @use_jbehave_proxy == 'true' %>
<%= render 'jenkins/jbehave_profile_settings.xml.erb' %>
<% end %> 

    </profiles>
 
</settings>
